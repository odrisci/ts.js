/*! ts v0.0.0 - 2015-06-23 
 * License: MIT */
!function(a){function b(a){return a.sort(function(a,b){return a[0]-b[0]})}function c(){}var d=a.ts={version:"0.0.0"};d.timeSeries=function(){var a=[],d=new c;return d.splice=function(e){var f,g;if(e instanceof c)f=e.data();else{if(!(e instanceof Array))return alert("input must be a timeSeries or an array of [timestamp, value] pairs"),d;f=e,b(f)}if(0===f.length)return d;var h,i=function(a,b,c){if(0===a.length)return 0;var d,e,f,g=a.length-1;if(void 0===c&&(c=0),d=a[c][0],e=a[g][0],d>b)return c;if(b>=e)return a.length;for(var h;g-1>c;)h=Math.floor((c+g)/2),f=a[h][0],f>b?g=h:c=h,d=a[c][0],e=a[g][0];return g},j=0,k=0;for(g=0;j<f.length;){for(g=i(a,f[j][0],g);g>1&&g<a.length&&j<f.length&&a[g-1][0]===f[j][0];)a[g-1]=f[j],++g,++j;if(g==a.length){h=[g,0].concat(f.slice(j)),Array.prototype.splice.apply(a,h);break}if(g>a.length||j>f.length)break;k=i(f,a[g][0],j),h=[g,0].concat(f.slice(j,k)),Array.prototype.splice.apply(a,h),j=k}return d},d.insert=function(b,c){var e=a.length-1;if(0>e)return a.push([b,c]),this;for(;e>0&&a[e][0]>b;)e--;return a[e][0]===b?a[e][1]=c:a.splice(e+1,0,[b,c]),d},d.data=function(){return a},d.getValueNearest=function(b){if(0===a.length)return[];var c,d=0,e=a.length-1,f=a[d][0],g=a[e][0],h=0;if(f>=b)return a[d];if(b>=g)return a[e];for(;e-1>d;)if(c=Math.floor((d+e)/2),a[c][0]>b?e=c:d=c,f=a[d][0],g=a[e][0],++h>a.length/2){console.log("Aaarggh!");break}return c=Math.abs(b-f)>Math.abs(b-g)?e:d,a[c]},d.getValuesInRange=function(b,c){if(0===a.length)return[];for(var d=a.length-1,e=a[d][0],f=[];d>=0&&(e=a[d][0])>=b;)c>e&&f.unshift(a[d]),--d;return f},d.dropDataBefore=function(b){for(var c=0;c<a.length&&a[c][0]<b;)c++;return a.splice(0,c),d},d}}(this);